{% extends 'base.html.twig' %}

{% block title %}Employee Edit{% endblock %}

{% block body %}

    <div class="headline">
        <div class="container">
            <div class="row">
                <div class="col-2">
                    <a href="{{ path('app_dashboard') }}">
                        <img src="{{ asset('images/conuti-logo-white-90px.png') }}">
                    </a>
                </div>
                <div class="col-9">
                    <h1>{{ "app.employee.edit"|trans }}</h1>
                </div>
                <div class="col-1">
                    {% if app.user %}
                        <a href="{{ path('app_logout') }}" title="{{ "app.logout"|trans }}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" fill="currentColor" class="bi bi-person-dash" viewBox="0 0 16 16">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-right" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0z"/>
                                    <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708z"/>
                                </svg>
                            </svg>
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="container body-content">
        {% for label, messages in  app.flashes %}
            {% for message in messages %}
                <div class="alert alert-{{ label }}" role="alert">
                    {{ message }}
                </div>
            {% endfor %}
        {% endfor %}

        {{ form_start(form) }}
        <div class="row">
            <div class="col-1">
                <a href={{ path('app_employee') }}><img class="img-go-back" src="{{ asset('images/circle-chevron-left-solid.svg') }}" alt={{ "app.dashboard"|trans }}></a>
            </div>
            <div class="col-11">
                {{ form_widget(form.submit) }}
            </div>
        </div>

        <fieldset class="mb-3">
            {{ form_label(form.personalGroup) }}
            <div id="employee_personalGroup">
                <div class="row">
                    <div class="col-4">
                        <div class="form-floating mb-3">
                            {{ form_widget(form.personalGroup.name) }}
                            {{ form_label(form.personalGroup.name) }}
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-floating mb-3">
                            {{ form_widget(form.personalGroup.firstname) }}
                            {{ form_label(form.personalGroup.firstname) }}
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-floating mb-3">
                            {{ form_widget(form.personalGroup.employeeNumber) }}
                            {{ form_label(form.personalGroup.employeeNumber) }}
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-4">
                        <div class="form-floating mb-3">
                            {{ form_widget(form.personalGroup.email) }}
                            {{ form_label(form.personalGroup.email) }}
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-floating mb-3">
                            {{ form_widget(form.personalGroup.entry) }}
                            {{ form_label(form.personalGroup.entry) }}
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-floating mb-3">
                            {{ form_widget(form.personalGroup.resignation) }}
                            {{ form_label(form.personalGroup.resignation) }}
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>

        <fieldset class="mb-3">
            {{ form_label(form.additionalGroup) }}
            <div id="employee_additionalGroup">
                <div class="row">
                    <div class="col-4">
                        <div class="form-floating mb-3">
                            {{ form_widget(form.additionalGroup.hourlyRate) }}
                            {{ form_label(form.additionalGroup.hourlyRate) }}
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-floating mb-3">
                            {{ form_widget(form.additionalGroup.incentiveRate) }}
                            {{ form_label(form.additionalGroup.incentiveRate) }}
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-floating mb-3">
                            {{ form_widget(form.additionalGroup.annualWorkingTime) }}
                            {{ form_label(form.additionalGroup.annualWorkingTime) }}
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>

        <fieldset class="mb-3">
            {{ form_label(form.salaryGroup) }}
            <div id="employee_additionalGroup">
                <div class="row">
                    <div class="col-4">
                        <div class="form-floating mb-3">
                            {{ form_widget(form.salaryGroup.targetSalary) }}
                            {{ form_label(form.salaryGroup.targetSalary) }}
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-floating mb-3">
                            {{ form_widget(form.salaryGroup.targetVariablePortion) }}
                            {{ form_label(form.salaryGroup.targetVariablePortion) }}
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-floating mb-3">
                            {{ form_widget(form.salaryGroup.fixPortion) }}
                            {{ form_label(form.salaryGroup.fixPortion) }}
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-floating mb-3">
                            {{ form_widget(form.salaryGroup.fixVariablePortion) }}
                            {{ form_label(form.salaryGroup.fixVariablePortion) }}
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-floating mb-3">
                            {{ form_widget(form.salaryGroup.fixVariableEntry) }}
                            {{ form_label(form.salaryGroup.fixVariableEntry) }}
                        </div>
                    </div>
                    <div class="col-4">
                        <div id="employee_additionalGroup">
                            <div class="form-floating">
                                {{ form_widget(form.variablePortionGroup.variablePortion) }}
                                {{ form_label(form.variablePortionGroup.variablePortion) }}
                                {{ form_label(form.variablePortionGroup) }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>

        <fieldset class="mb-3">
            {{ form_label(form.benefitsGroup) }}
            <div id="employee_additionalGroup">
                <div class="row">
                    <div class="col-4">
                        <div class="form-floating">
                            {{ form_widget(form.benefitsGroup.benefits) }}
                        </div>
                    </div>
                    {% for benefitType in monetaryBenefitType %}
                        {% set id = benefitType.id %}
                        <div class="col-4">
                            {{ benefitType.name }}
                            <div class="form-floating">
                                {{ form_widget(form['benefitsMonetaryBenefit'~id]) }}
                                {{ form_label(form['benefitsMonetaryBenefit'~id]) }}
                            </div>
                            <div class="form-floating">
                                {{ form_widget(form['benefitsPrivatePortion'~id]) }}
                                {{ form_label(form['benefitsPrivatePortion'~id]) }}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </fieldset>
        <div class="row">
            <div class="col-8">
                {{ form_widget(form.info) }}
            </div>
        </div>


        {% import _self as formMacros %}

        {% macro printHoursRow(form) %}
            {% include 'employee/macro/hours.html.twig' %}
        {% endmacro %}

        {% macro printRifflesRow(form) %}
            {% include 'employee/macro/riffles.html.twig' %}
        {% endmacro %}

        {% macro printGoodiesRow(form) %}
            {% include 'employee/macro/goodies.html.twig' %}
        {% endmacro %}

        {% macro printBonusRow(form) %}
            {% include 'employee/macro/bonus.html.twig' %}
        {% endmacro %}

        <fieldset class="hours mb-3">
            <legend class="col-form-label required">{{ field_label(form.hours) }}</legend>
            <div id="employee_hours">
                <div class="row">
                    <div class="js-wrapper-hours"
                         data-prototype="{{ formMacros.printHoursRow(form.hours.vars.prototype)|e('html_attr') }}"
                         data-index="{{ form.hours|length }}"
                    >
                        <a href="#" class="btn btn-conuti js-add-hours mb-3">
                            <span class="fa fa-plus-circle"></span>
                            {{ "app.employee.hours.add"|trans }}
                        </a>

                        {% for hoursForm in form.hours %}
                            {{ formMacros.printHoursRow(hoursForm) }}
                        {% endfor %}
                    </div>

                </div>
            </div>
        </fieldset>

        <fieldset class="riffles mb-3">
            <legend class="col-form-label required">{{ field_label(form.riffles) }}</legend>
            <div id="employee_riffles">
                <div class="row">
                    <div class="js-wrapper-riffle"
                         data-prototype="{{ formMacros.printRifflesRow(form.riffles.vars.prototype)|e('html_attr') }}"
                         data-index="{{ form.riffles|length }}"
                    >
                        <a href="#" class="btn btn-conuti js-add-riffle mb-3">
                            <span class="fa fa-plus-circle"></span>
                            {{ "app.employee.riffle.add"|trans }}
                        </a>

                        {% for rifflesForm in form.riffles %}
                            {{ formMacros.printRifflesRow(rifflesForm) }}
                        {% endfor %}
                    </div>

                </div>
            </div>
        </fieldset>

        <fieldset class="goodies mb-3">
            <legend class="col-form-label required">{{ field_label(form.goodies) }}</legend>
            <div id="employee_goodies">
                <div class="row">
                    <div class="js-wrapper-goodies"
                         data-prototype="{{ formMacros.printGoodiesRow(form.goodies.vars.prototype)|e('html_attr') }}"
                         data-index="{{ form.goodies|length }}"
                    >
                        <a href="#" class="btn btn-conuti js-add-goodies mb-3">
                            <span class="fa fa-plus-circle"></span>
                            {{ "app.employee.goodies.add"|trans }}
                        </a>

                        {% for goodiesForm in form.goodies %}
                            {{ formMacros.printGoodiesRow(goodiesForm) }}
                        {% endfor %}
                    </div>

                </div>
            </div>
        </fieldset>

        <fieldset class="bonus mb-3">
            <legend class="col-form-label required">{{ field_label(form.bonuses) }}</legend>
            <div id="employee_bonus">
                <div class="row">
                    <div class="js-wrapper-bonus"
                         data-prototype="{{ formMacros.printBonusRow(form.bonuses.vars.prototype)|e('html_attr') }}"
                         data-index="{{ form.bonuses|length }}"
                    >
                        <a href="#" class="btn btn-conuti js-add-bonus mb-3">
                            <span class="fa fa-plus-circle"></span>
                            {{ "app.employee.bonus.add"|trans }}
                        </a>

                        {% for bonusForm in form.bonuses %}
                            {{ formMacros.printBonusRow(bonusForm) }}
                        {% endfor %}
                    </div>

                </div>
            </div>
        </fieldset>
        {{ form_end(form) }}
    </div>
{% endblock %}
